<!doctype html>
<html lang="it">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Chatbot n8n</title>
    <meta name="description" content="Widget chat n8n">
    <style>
      :root { color-scheme: light dark; }
      body { margin: 0; font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif; }
      .container { padding: 24px; max-width: 760px; margin: 0 auto; }
      h1 { font-size: 1.5rem; margin: 16px 0; }
      p { line-height: 1.6; }
      code { background: rgba(127,127,127,.15); padding: 2px 6px; border-radius: 6px; }
      .note { font-size: .95rem; opacity: .8; }
    </style>
    <!-- CDN ufficiale @n8n/chat -->
    <script type="module">
      import Chat from 'https://cdn.jsdelivr.net/npm/@n8n/chat@latest/dist/chat.js';

      const WEBHOOK_URL = 'https://n8n.zakeke.com/webhook/29a7a33b-aa1c-4cd2-b3e6-947437313dfa/chat';

      try {
        const chat = new Chat({
          webhookUrl: WEBHOOK_URL,
          title: 'Assistente',
        });
        // Espone per debug da console
        window.n8nChat = chat;
        // Apertura automatica (puoi chiuderla con window.n8nChat.close())
        chat.open();
        console.log('[n8n-chat] Widget inizializzato');
      } catch (e) {
        console.error('[n8n-chat] Errore inizializzazione', e);
      }
    </script>
  </head>
  <body>
    <div class="container">
      <h1>Chatbot n8n</h1>
      <p>
        Questa pagina incorpora il widget <code>@n8n/chat</code> via CDN. Configura la tua
        <code>webhookUrl</code> n8n in <code>index.html</code> e pubblica come sito statico.
      </p>
      <p>
        <button onclick="window.n8nChat ? window.n8nChat.open() : alert('Widget non inizializzato')">Apri chat (debug)</button>
      </p>
      <p class="note">
        Suggerimento: in sviluppo locale puoi usare un tunnel (ad es. <code>cloudflared</code>,
        <code>ngrok</code>) verso l'istanza n8n accessibile pubblicamente per testare il widget.
      </p>
    </div>
  </body>
</html>


